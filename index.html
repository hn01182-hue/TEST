<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <title>íŠ¸ë¦­ì»¬ íš¨ìœ¨ ê³„ì‚°ê¸°</title>

    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore-compat.js"></script>

    <style>
input[readonly] {
    background-color: #f0f0f0 !important; /* íšŒìƒ‰ ë°°ê²½ */
    color: #999 !important; /* ê¸€ììƒ‰ íë¦¬ê²Œ */
    cursor: not-allowed; /* ê¸ˆì§€ í‘œì‹œ ì»¤ì„œ */
    border: 1.5px solid #ddd !important;
}
        :root { --primary: #7db249; --bg: #fdf6e3; --card: #ffffff; }
        body {
            font-family: 'Pretendard', sans-serif;
            background-size: cover;
            background-attachment: fixed;
            background-position: center;
            margin: 0; padding: 20px;
            transition: background-image 0.5s ease-in-out;
        }
        .container { max-width: 500px; margin: auto; }
        .tabs { display: flex; gap: 4px; margin-bottom: 15px; }
        .tab { flex: 1; padding: 12px 4px; text-align: center; background: #ddd; cursor: pointer; border-radius: 10px 10px 0 0; font-weight: bold; font-size: 0.8em; }
        .tab.active { background: var(--card); color: var(--primary); border-bottom: 3px solid var(--primary); }
        .card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(5px);
            padding: 20px; border-radius: 0 0 15px 15px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            display: none;
        }
        .card.active { display: block; }

        .filter-container { display: flex; flex-direction: column; gap: 8px; margin-bottom: 15px; }
        .search-input { flex: 2; padding: 10px; border: 1.5px solid var(--primary); border-radius: 8px; outline: none; font-size: 14px; }
        .apostle-select { flex: 1; border: 1.5px solid #ddd; border-radius: 8px; padding: 5px; font-size: 0.85em; cursor: pointer; }

        .pkg-card { border: 1px solid #eee; border-radius: 12px; padding: 18px; margin-bottom: 18px; background: #fafafa; }
        .pkg-name { font-weight: 800; color: #333; margin-bottom: 5px; display: block; font-size: 1.05em; }
        .pkg-price-tag { color: var(--primary); font-weight: bold; font-size: 1em; display: block; margin-bottom: 8px; }
        .pkg-items { font-size: 0.85em; color: #666; margin-top: 10px; line-height: 1.5; background: #f0f0f0; padding: 10px; border-radius: 8px; }
        
        .eff-badge { 
            display: inline-block; 
            background: #e8f5e9; 
            color: #2e7d32; 
            padding: 5px 10px; 
            border-radius: 6px; 
            font-size: 0.85em; 
            font-weight: bold; 
            border: 1px solid #c8e6c9;
            margin-bottom: 10px;
        }

        .apply-btn { margin-top: 15px; width: 100%; padding: 10px; background: #fff; border: 1.5px solid var(--primary); color: var(--primary); border-radius: 6px; cursor: pointer; font-weight: bold; transition: 0.2s; }
        .apply-btn:hover { background: var(--primary); color: #fff; }

        .row { display: flex; align-items: center; gap: 10px; margin-bottom: 10px; }
        .item-info { display: flex; align-items: center; gap: 10px; flex: 1; }
        .item-icon { width: 32px; height: 32px; object-fit: contain; background: #eee; border-radius: 6px; flex-shrink: 0; }
        .item-name { font-size: 0.95em; font-weight: 600; }
        .input-wrapper { display: flex; align-items: center; gap: 5px; width: 150px; justify-content: flex-end; }
        input[type="number"] { width: 120px; padding: 8px; border: 1.5px solid #eee; border-radius: 6px; text-align: right; font-size: 14px; }
        .btn { width: 100%; padding: 12px; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; margin-top: 15px; }
        .btn-main { background: var(--primary); color: white; }
        .btn-sub { background: #f0f0f0; color: #666; font-size: 0.85em; }
        #result { margin-top: 20px; padding: 20px; border-radius: 12px; text-align: center; display: none; background: #f8f9fa; border: 1px solid #e9ecef; }
        .result-val { font-size: 2.2em; font-weight: 800; color: var(--primary); margin: 5px 0; }
        .small-text { font-size: 0.8em; color: #888; margin-bottom: 5px; }
    </style>
</head>
<body>

<div class="container">
    <div class="tabs">
        <div class="tab active" onclick="openTab('preset')">ğŸ ì£¼ê°„ íŒ¨í‚¤ì§€</div>
        <div class="tab" onclick="openTab('constant')">ğŸ›ï¸ ë°ì¼ë¦¬/íŒ¨ìŠ¤/ì€ì´</div>
        <div class="tab" onclick="openTab('calc')">ğŸ“Š ë¶„ì„</div>
        <div class="tab" onclick="openTab('settings')">âš™ï¸ ì„¤ì •</div>
    </div>

    <div id="preset" class="card active">
        <div class="filter-container">
<div id="chart-container" style="display:none; background:rgba(255,255,255,0.9); border-radius:12px; padding:15px; margin-bottom:15px; border:1px solid var(--primary);">
    <p style="margin:0 0 10px 0; font-size:0.85em; font-weight:bold; color:#555;">ğŸ“Š ì„ íƒ ì‚¬ë„ íŒ¨í‚¤ì§€ íš¨ìœ¨ ë¹„êµ (íšŒìƒ‰ì„ : ì€ì´ íŒ¨í‚¤ì§€ ê¸°ì¤€(201))</p>
    <div id="chart-wrapper"><canvas id="releasedChart"></canvas>
    </div>
</div>
            <div style="display: flex; gap: 8px;">
                <input type="text" id="pkg-search" class="search-input" placeholder="íŒ¨í‚¤ì§€ ë˜ëŠ” ì‚¬ë„ ê²€ìƒ‰..." oninput="filterReleased()">
                <select id="apostle-select" class="apostle-select" onchange="filterReleased()">
                    <option value="all">ì „ì²´ ì‚¬ë„</option>
                </select>
            </div>
            <div style="display: flex; gap: 8px; align-items: center;">
                <select id="sort-type" class="apostle-select" onchange="filterReleased()" style="flex: 1;">
                    <option value="price">ê°€ê²© ê¸°ì¤€</option>
                    <option value="score">íš¨ìœ¨ ì ìˆ˜ ê¸°ì¤€</option>
                </select>
                <select id="sort-order" class="apostle-select" onchange="filterReleased()" style="flex: 1;">
                    <option value="asc">ì˜¤ë¦„ì°¨ìˆœ (ë‚®ì€ìˆœ)</option>
                    <option value="desc">ë‚´ë¦¼ì°¨ìˆœ (ë†’ì€ìˆœ)</option>
                </select>
            </div>
        </div>
        <div id="released-list"></div>
    </div>

    <div id="constant" class="card">
        <div id="constant-list"></div>
    </div>

    <div id="calc" class="card">
        <div class="row">
            <div class="item-info"><span class="item-name" style="font-size: 1.1em; color: var(--primary);">ğŸ“¦ íŒ¨í‚¤ì§€ ê°€ê²©</span></div>
            <div class="input-wrapper"><input type="number" id="pkg-price" placeholder="0" oninput="saveCurrentPrice()"><span>ì›</span></div>
        </div>
        <div id="item-inputs" style="margin-top:10px;"></div>
        <button class="btn btn-main" onclick="calculate()">íš¨ìœ¨ ê³„ì‚°í•˜ê¸°</button>
        <div id="result">
            <div class="small-text">ì´ íŒ¨í‚¤ì§€ì˜ 1,000ì›ë‹¹ ê°€ì¹˜</div>
            <div class="result-val" id="res-rate">0ê°œ</div>
            <div id="res-total" style="font-size: 0.9em; color: #666;">(ì´ ì—˜ë¦¬í”„ í™˜ì‚°: 0ê°œ)</div>
        </div>
    </div>

    <div id="settings" class="card">
        <div id="settings-list"></div>
        <button class="btn btn-sub" onclick="copyShareLink()">ğŸ”— ì„¤ì • ê³µìœ  ë§í¬ ë³µì‚¬</button>
        <div style="text-align: right; margin-top: 20px;"><button style="color: #e91e63; border: none; background: none; cursor: pointer; font-weight: bold;" onclick="resetConfig()">âš ï¸ ì´ˆê¸°í™”</button></div>
    </div>
</div>
    
<script src="config.js"></script>

<script>
    // 2. DB ì—°ê²° ë„êµ¬ ì¤€ë¹„ (app.jsë³´ë‹¤ ë¨¼ì € ì‹¤í–‰ë˜ì–´ì•¼ í•¨)
    // config.jsì— ìˆëŠ” firebaseConfigë¥¼ ì‚¬ìš©í•˜ì—¬ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.
    if (typeof firebaseConfig !== 'undefined') {
        firebase.initializeApp(firebaseConfig);
        window.db = firebase.firestore(); // ì „ì—­ ë³€ìˆ˜ë¡œ ì„ ì–¸í•˜ì—¬ app.jsì—ì„œ ì“¸ ìˆ˜ ìˆê²Œ í•¨
    } else {
        console.error("config.jsì—ì„œ firebaseConfigë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤!");
    }
</script>

<script src="app.js"></script>

<script>
    // 4. ëª¨ë“  íŒŒì¼ì´ ë¡œë“œëœ í›„ ìµœì¢… ì‹¤í–‰
    window.onload = function() {
        if (typeof loadAll === 'function') {
            loadAll(); 
            applyRandomBackground();
            loadReleasedPackages(); 
            renderConstantPackages();
        } else {
            console.error("app.jsê°€ ì œëŒ€ë¡œ ë¡œë“œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. íŒŒì¼ëª…ì„ í™•ì¸í•´ì£¼ì„¸ìš”.");
        }
    };
</script>
</body>
</html>










